#ifndef _HL_PROTOCOL_H
#define _HL_PROTOCOL_H

#include <cstdint>

// message IDs
enum
{
	MSGID_ERROR = 100,
	MSGID_GET_MSGS,
	MSGID_NEW_MSG,
	MSGID_OLD_POST_NEWS,
	MSGID_SERVER_MSG,
	MSGID_CHAT_SEND,
	MSGID_CHAT_MSG,
	MSGID_LOGIN,
	MSGID_SEND_INSTANT_MSG,
	MSGID_SHOW_AGREEMENT,
	MSGID_DISCONNECT_USER,
	MSGID_DISCONNECT_MSG,
	MSGID_INVITE_NEW_CHAT,
	MSGID_INVITE_TO_CHAT,
	MSGID_REJECT_CHAT_INVITE,
	MSGID_JOIN_CHAT,
	MSGID_LEAVE_CHAT,
	MSGID_NOTIFY_CHAT_CHANGE_USER,
	MSGID_NOTIFY_CHAT_DELETE_USER,
	MSGID_NOTIFY_CHAT_TOPIC,
	MSGID_SET_CHAT_TOPIC,
	MSGID_AGREED,
	MSGID_SERVER_BANNER,
	MSGID_ICON_CHANGE,
	MSGID_NICKNAME_CHANGE,
	MSGID_FAKE_RED,
	MSGID_AWAY,
	MSGID_CRAZY_SERVER,
	MSGID_BLOCK_DOWNLOAD,
	MSGID_VISIBILITY,
	MSGID_ADMIN_INSPECTOR,
	MSGID_STD_MSG,
	MSGID_NEWS_EDIT_ARTICLE,
	MSGID_GET_FILENAMES = 200,
	MSGID_DOWNLOAD_FILE = 202,
	MSGID_UPLOAD_FILE,
	MSGID_DELETE_FILE,
	MSGID_NEW_DIR,
	MSGID_GET_FILE_INFO,
	MSGID_SET_FILE_INFO,
	MSGID_MOVE_FILE,
	MSGID_MAKE_SYMLINK,
	MSGID_DOWNLOAD_DIR,
	MSGID_DOWNLOAD_INFO,
	MSGID_DOWNLOAD_BANNER,
	MSGID_UPLOAD_FOLDER,
	MSGID_GET_USERNAMES = 300,
	MSGID_NOTIFY_CHANGE_USER,
	MSGID_NOTIFY_DELETE_USER,
	MSGID_GET_CLIENT_INFO_TEXT,
	MSGID_SET_CLIENT_USER_INFO,
	MSGID_NEW_USER = 350,
	MSGID_DELETE_USER,
	MSGID_GET_USER,
	MSGID_SET_USER,
	MSGID_USER_ACCESS,
	MSGID_USER_BROADCAST,
	MSGID_GET_NEWS_CATEGORY_NAMES = 370,
	MSGID_GET_NEWS_ARTICLE_NAMES,
	MSGID_DELETE_NEWS_ITEM = 380,
	MSGID_NEW_NEWS_BUNDLE,
	MSGID_NEW_NEWS_CATEGORY,
	MSGID_GET_NEWS_ARTICLE_DATA = 400,
	MSGID_POST_NEWS_ARTICLE = 410,
	MSGID_DELETE_NEWS_ARTICLE,
	MSGID_PING = 500,
	MSGID_ICONS = 1861,
	MSGID_SET_ICON_AL,
	MSGID_GET_ICON_AL,
	MSGID_ICON_CHANGE_AL,
	MSGID_LINK_LOGIN = 2048,
	MSGID_LINK_JOIN,
	MSGID_LINK_LEAVE,
	MSGID_LINK_PACKET,
	MSGID_GET_NEWS_RAW = 2149,
	MSGID_GET_USER_INFO_RAW = 2160,
	MSGID_USER_SELF_EDIT = 2304,
	MSGID_PERMISSIONS
};

// message field IDs
enum
{
	MFID_ERROR_TEXT = 100,
	MFID_DATA,
	MFID_USERNAME,
	MFID_USER_ID,
	MFID_USER_ICON_ID,
	MFID_USER_LOGIN,
	MFID_USER_PASSWORD,
	MFID_REF_NUM,
	MFID_TRANSFER_SIZE,
	MFID_CHAT_FLAGS,
	MFID_USER_ACCESS,
	MFID_USER_ALIAS,
	MFID_USER_FLAGS,
	MFID_FLAGS,
	MFID_CHAT_ID,
	MFID_CHAT_TOPIC,
	MFID_WAITING_COUNT,
	MFID_ICON_ID,
	MFID_NICKNAME,
	MFID_FAKE_RED,
	MFID_AWAY,
	MFID_BLOCK_DOWNLOAD,
	MFID_VISIBLE,
	MFID_ADMIN_INSPECTOR,
	MFID_STD_MSG,
	MFID_SERVER_AGREEMENT = 150,
	MFID_SERVER_BANNER,
	MFID_SERVER_BANNER_TYPE,
	MFID_SERVER_BANNER_URL,
	MFID_NO_SERVER_AGREEMENT,
	MFID_VERSION = 160,
	MFID_COMMUNITY_BANNER_ID,
	MFID_SERVER_NAME,
	MFID_FILE_INFO = 200,
	MFID_FILENAME,
	MFID_FILE_PATH,
	MFID_FILE_RESUME_DATA,
	MFID_FILE_TRANSFER_FLAGS,
	MFID_FILE_TYPE_STRING,
	MFID_FILE_CREATOR_STRING,
	MFID_FILESIZE,
	MFID_FILE_CREATE_DATE,
	MFID_FILE_EDIT_DATE,
	MFID_FILE_NOTE,
	MFID_FILE_NEW_NAME,
	MFID_FILE_NEW_PATH,
	MFID_FILE_TYPE,
	MFID_MSG_QUOTE,
	MFID_AUTO_REPLY,
	MFID_DIR_ITEM_COUNT = 220,
	MFID_USER_INFO = 300,
	MFID_NEWS_CATEGORY_GUID = 319,
	MFID_NEWS_CATEGORY_LIST_DATA_OLD,
	MFID_NEWS_ARTICLE_LIST_DATA,
	MFID_NEWS_CATEGORY_NAME,
	MFID_NEWS_CATEGORY_LIST_DATA,
	MFID_NEWS_PATH = 325,
	MFID_NEWS_ARTICLE_ID,
	MFID_NEWS_ARTICLE_MIME,
	MFID_NEWS_ARTICLE_TITLE,
	MFID_NEWS_ARTICLE_POSTER,
	MFID_NEWS_ARTICLE_DATE,
	MFID_NEWS_PREV_ARTICLE,
	MFID_NEWS_NEXT_ARTICLE,
	MFID_NEWS_ARTICLE_DATA,
	MFID_NEWS_ARTICLE_FLAGS,
	MFID_NEWS_PARENT_ARTICLE,
	MFID_NEWS_1ST_CHILD_ARTICLE,
	MFID_NEWS_DELETE_REPLIES,
	MFID_ICON_GIF = 768,
	MFID_GIFS,
	MFID_OFFSET = 793,
	MFID_LIMIT,
	MFID_COUNT,
	MFID_NEWS_LIMIT = 800,
	MFID_SEARCH = 1024,
	MFID_COLOR = 1280,
	MFID_PACKET = 1536,
	MFID_POST = 2048,
	MFID_POST_ID,
	MFID_PERMISSION_GROUP = 2128,
	MFID_PERMISSIONS,
	MFID_IP_ADDRESS = 2304,
	MFID_SESSION_KEY = 3587,
	MFID_MAC_ALGORITHM,
	MFID_SID = 3687,
	MFID_MD5 = 3712,
	MFID_HAVAL,
	MFID_SHA1,
	MFID_CICN = 3728,
	MFID_CHAT_AWAY = 3745,
	MFID_SERVER_CIPHER_ALGORITHM = 3777,
	MFID_CLIENT_CIPHER_ALGORITHM,
	MFID_SERVER_CIPHER_MODE,
	MFID_CLIENT_CIPHER_MODE,
	MFID_SERVER_CIPHER_IVEC,
	MFID_CLIENT_CIPHER_IVEC,
	MFID_SERVER_CHECKSUM_ALGORITHM,
	MFID_CLIENT_CHECKSUM_ALGORITHM,
	MFID_SERVER_COMPRESS_ALGORITHM,
	MFID_CLIENT_COMPRESS_ALGORITHM
};

struct MSG_HEADER
{
	uint8_t flags;
	bool reply;
	uint16_t type;
	uint32_t id;
	uint32_t errorCode;
	uint32_t totalSize;
	uint32_t chunkSize;
	uint16_t numParams;
};

struct MSG_FIELD_HEADER
{
	uint16_t id;
	uint16_t size;
};

struct USER_FLAGS
{
	unsigned
		away : 1,
		admin : 1,
		refusePrivateMessages : 1,
		refusePrivateChat : 1,
		_reserved : 12;
};

#endif // _HL_PROTOCOL_H
